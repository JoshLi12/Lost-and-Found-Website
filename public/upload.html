<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Home</title>
    <link rel="stylesheet" href="./reset.css">
    <link rel="stylesheet" href="./index.css">
    <link rel="stylesheet" href="./main.css">
    <!-- <link rel="icon" href="./public/website-logo.png" type="image/x-icon"> -->
  </head>

  <body>
    <header>
      <ul id="nav-bar-admin">
        <li>
          <a href="/admin">
            <img id="appleby-logo-white" src="./img/appleby-logo-whitet.png">
          </a>
        </li>
        
        <li id="nav-bar-right">
          <div id="logout">
            <form action="/logout" method="post" >
              <input id="logout-button" type="submit" value="Log out"></input>
            </form>
          </div>
        </li>
        
      </ul>
    </header>
    
    <main id="main">
      <div id="form-box">
        <h1 id="upload-title">Upload Item</h1>
        <div id="itemCardDisplay">

        </div>
        
        <form id="upload-forms" action="/upload" method="post" enctype="multipart/form-data">
            <div>
                <input type="text" name="idBox" id="id-box" placeholder="Item ID">
            </div>
            <div>
                <input type="text" name="nameBox" id="name-box" placeholder="Name on item (n/a if none)">
            </div>
            <div>
                <input type="file" name="image" id="image-box">
            </div>
            <div>
                <input id="submit-information" type="submit" value="Upload">
            </div>
        </form>
      </div>
    </main>

    <script>
      const uploadForm = document.getElementById('upload-forms');
      const imageContainer = document.getElementById('itemCardDisplay');
      const fileInput = document.getElementById('image-box'); // const fileInput = uploadForm.querySelector('input[type="file"]');
    
      fileInput.addEventListener('change', () => {
        const selectedFile = fileInput.files[0];
        if (selectedFile) {
          const reader = new FileReader();
          reader.onload = (event) => {
            const imgElement = document.createElement('img');
            imgElement.src = event.target.result;
            imgElement.style.maxWidth = '100%';
            imageContainer.innerHTML = '';
            imgElement.style["object-fit"] = "fill";
            imgElement.style["border-radius"] = "9px";
            imageContainer.appendChild(imgElement);
          };
          reader.readAsDataURL(selectedFile);
        }
      });
    </script>
  </body>
</html>